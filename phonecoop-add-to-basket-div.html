<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <link href="https://uat-phonecoop-admin.conversity.com/custom/favicons/favicon.ico" type="image/x-icon"
    rel="shortcut icon">
  <title>Add To Basket</title>

  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>

  <script type="text/javascript">

    function productToBasket(e, value) {
      $('#ProductToBasket input').val(value).trigger('input');
      console.log("this: ", e, "value: ", value);
      var prnt = $(e).parents('.rippl-product--details');
      console.log("parent: ", prnt);
      var formID = $(prnt).find('.basket-params').attr('prnt');
      console.log("formID: ", formID);

      $(prnt).find('.basket-params > div').each(function() {
          var elID = $(this).attr('class');
          var elVal = $(this).text();
          $('#addToBasket'+ formID +' #' + elID).val(elVal).trigger('input');

           console.log("elID: ", elID, "elVal: ", elVal);
      });

      var url = "https://www.thephone.coop.tradeitdev.com/basket/";

      $('#addToBasket'+ formID).attr('action',url).submit();

      console.log("submitted");
    }


  </script>
</head>

<body>
  <p>
    POST URL Format: <br> <b>https://www.thephone.coop.tradeitdev.com/basket/</b>
  </p>
  <div field="ProductToBasket" form-hidden="" id="ProductToBasket"><!---- --></div>
  <div class="rippl-product--details">
    <div class="basket-params" prnt="Mobile">
      <p>__csrfToken</p>
      <div class="__csrfToken">300973C420895D06E07785051AFCCE4BFF33B41A708F011FA1D9F266957FAA60E6</div>
      <p>Handset</p>
      <div class="basket_addtobasketoption_enabled" id="basket_addtobasketoption_enabled">1</div>
      <div class="basket_1_productid" id="basket_1_productid">876</div>
      <div class="basket_1_productcategoryid" id="basket_1_productcategoryid">80</div>
      <div class="basket_1_quantity" id="basket_1_quantity">1</div>
      <div class="basket_category" id="basket_category">80</div>
      <div class="basket_1_addtobasket" id="basket_1_addtobasket">1</div>
      <div class="custom_basket_attribute_1_IsCoopParent" id="custom_basket_attribute_1_IsCoopParent">1</div>
      <div class="custom_basket_attribute_1_Type" id="custom_basket_attribute_1_Type">Hardware</div>
      <div class="custom_basket_attribute_1_Feature1" id="custom_basket_attribute_1_Feature1">16GB</div>
      <div class="custom_basket_attribute_1_Feature2" id="custom_basket_attribute_1_Feature2">Black</div>
      <div class="custom_basket_attribute_1_Feature3" id="custom_basket_attribute_1_Feature3">8MP Camera</div>

      <p>Bundle</p>
      <div class="basket_2_productid" id="basket_2_productid">713</div>
      <div class="basket_2_productcategoryid" id="basket_2_productcategoryid">80</div>
      <div class="basket_2_addtobasket" id="basket_2_addtobasket">1</div>
      <div class="custom_basket_attribute_2_IsCoopParent" id="custom_basket_attribute_2_IsCoopParent">0</div>
      <div class="custom_basket_attribute_2_Type" id="custom_basket_attribute_2_Type">Service</div>

      <p>Mobile Limit</p>
      <div class="basket_3_productid" id="basket_3_productid">678</div>
      <div class="basket_3_productcategoryid" id="basket_3_productcategoryid">80</div>
      <div class="basket_3_addtobasket" id="basket_3_addtobasket">1</div>
      <div class="custom_basket_attribute_3_IsCoopParent" id="custom_basket_attribute_3_IsCoopParent">0</div>
      <div class="basket_count" id="basket_count">3</div>

      <button class="addToBasket" onclick="productToBasket(this,'hello');">Add To Basket</button>
    </div>
  </div>
</body>

</html>